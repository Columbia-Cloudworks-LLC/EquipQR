# ─────────────────────────────────────────────────────────────────────────────
# EquipQR — env.example
# Copy to .env for local development. Do NOT commit your filled .env.
# Client-readable variables MUST be prefixed with VITE_ (Vite exposes them).
# Server-only secrets live in Supabase Edge Function secrets, or in
# supabase/functions/.env ONLY for local 'supabase functions serve'.
# ─────────────────────────────────────────────────────────────────────────────

# ═══════════════════════════════════════════════════════════════════════════════
# WHERE TO GET API KEYS
# ═══════════════════════════════════════════════════════════════════════════════
#
# SUPABASE (VITE_SUPABASE_URL, VITE_SUPABASE_ANON_KEY, SUPABASE_SERVICE_ROLE_KEY)
#   1. Go to https://supabase.com/dashboard
#   2. Select your project (or create one)
#   3. Navigate to Settings → API
#   4. Copy "Project URL" → VITE_SUPABASE_URL / SUPABASE_URL
#   5. Copy "anon public" key → VITE_SUPABASE_ANON_KEY / SUPABASE_ANON_KEY
#   6. Copy "service_role secret" key → SUPABASE_SERVICE_ROLE_KEY (KEEP SECRET!)
#
# HCAPTCHA (VITE_HCAPTCHA_SITEKEY, HCAPTCHA_SECRET_KEY)
#   1. Go to https://dashboard.hcaptcha.com/
#   2. Sign up or log in
#   3. Create a new site or select existing
#   4. Copy "Site Key" → VITE_HCAPTCHA_SITEKEY (public, safe for client)
#   5. Go to Settings → Get your secret key → HCAPTCHA_SECRET_KEY (server only!)
#
# QUICKBOOKS / INTUIT (VITE_INTUIT_CLIENT_ID, INTUIT_CLIENT_ID, INTUIT_CLIENT_SECRET)
#   1. Go to https://developer.intuit.com/
#   2. Sign in with your Intuit account
#   3. Navigate to "My Apps" → Create an app (or select existing)
#   4. Choose "QuickBooks Online and Payments" as the platform
#   5. Go to "Keys & credentials" tab
#   6. Copy "Client ID" → VITE_INTUIT_CLIENT_ID (client) / INTUIT_CLIENT_ID (server)
#   7. Copy "Client Secret" → INTUIT_CLIENT_SECRET (server only, KEEP SECRET!)
#   8. Add Redirect URI: {SUPABASE_URL}/functions/v1/quickbooks-oauth-callback
#   9. For sandbox testing, use Development keys. For production, use Production keys.
#
# GOOGLE WORKSPACE (VITE_GOOGLE_WORKSPACE_CLIENT_ID, GOOGLE_WORKSPACE_CLIENT_ID, GOOGLE_WORKSPACE_CLIENT_SECRET)
#   1. Go to https://console.cloud.google.com/
#   2. Create a project or select existing
#   3. Enable the "Admin SDK API": APIs & Services → Library → Search "Admin SDK API" → Enable
#   4. Go to APIs & Services → Credentials → Create Credentials → OAuth client ID
#   5. Configure OAuth consent screen first if prompted:
#      - User type: Internal (for Workspace) or External (for testing)
#      - Add scopes: https://www.googleapis.com/auth/admin.directory.user.readonly
#   6. Create OAuth client ID:
#      - Application type: Web application
#      - Authorized redirect URIs: {SUPABASE_URL}/functions/v1/google-workspace-oauth-callback
#   7. Copy "Client ID" → VITE_GOOGLE_WORKSPACE_CLIENT_ID (client) / GOOGLE_WORKSPACE_CLIENT_ID (server)
#   8. Copy "Client secret" → GOOGLE_WORKSPACE_CLIENT_SECRET (server only, KEEP SECRET!)
#
# RESEND (RESEND_API_KEY)
#   1. Go to https://resend.com/
#   2. Sign up or log in
#   3. Navigate to API Keys → Create API Key
#   4. Copy the key → RESEND_API_KEY (server only, KEEP SECRET!)
#   5. Verify your sending domain under Domains if sending from custom domain
#
# GOOGLE MAPS (GOOGLE_MAPS_API_KEY, VITE_GOOGLE_MAPS_API_KEY)
#   1. Go to https://console.cloud.google.com/
#   2. Select your project
#   3. Navigate to APIs & Services → Credentials → Create Credentials → API Key
#   4. Restrict the key (recommended):
#      - Application restrictions: HTTP referrers (for client) or IP addresses (for server)
#      - API restrictions: Maps JavaScript API, Geocoding API, Places API
#   5. Copy the key → GOOGLE_MAPS_API_KEY (server) / VITE_GOOGLE_MAPS_API_KEY (client)
#
# STRIPE (DEPRECATED - kept for rollback compatibility)
#   1. Go to https://dashboard.stripe.com/
#   2. Navigate to Developers → API Keys
#   3. Copy "Publishable key" → VITE_STRIPE_PUBLISHABLE_KEY
#   4. Copy "Secret key" → STRIPE_SECRET_KEY (KEEP SECRET!)
#   5. For webhooks: Developers → Webhooks → Add endpoint → Copy signing secret → STRIPE_WEBHOOK_SECRET
#
# ═══════════════════════════════════════════════════════════════════════════════

# ── Client (Vite) — safe to expose to the browser
VITE_SUPABASE_URL=
    # Supabase project URL. Get from: Supabase Dashboard → Settings → API → Project URL
    # Files: src/integrations/supabase/client.ts
VITE_SUPABASE_ANON_KEY=
    # Supabase anonymous/public key. Get from: Supabase Dashboard → Settings → API → anon public
    # Files: src/integrations/supabase/client.ts
VITE_HCAPTCHA_SITEKEY=
    # hCaptcha public site key. Get from: https://dashboard.hcaptcha.com/ → Your site → Site Key
    # Files: src/components/auth/SignUpForm.tsx, src/components/ui/HCaptcha.tsx
VITE_SUPER_ADMIN_ORG_ID=
    # Organization ID to unlock super-admin tools. This is a UUID from your organizations table.
    # File: src/hooks/useSuperAdminAccess.ts

# ── QuickBooks Online OAuth (Client)
VITE_INTUIT_CLIENT_ID=
    # QuickBooks OAuth client ID. Get from: https://developer.intuit.com/ → My Apps → Keys & credentials
    # Files: src/services/quickbooks/auth.ts
    # Note: Safe to expose to client (used to initiate OAuth flow).
VITE_QB_OAUTH_REDIRECT_BASE_URL=
    # OAuth redirect base URL. Defaults to VITE_SUPABASE_URL if not set.
    # Must match what's registered in Intuit Developer Portal.
    # Full redirect URI: {this value}/functions/v1/quickbooks-oauth-callback
    # Files: src/services/quickbooks/auth.ts

# ── Google Workspace OAuth (Client)
VITE_GOOGLE_WORKSPACE_CLIENT_ID=
    # Google OAuth client ID. Get from: https://console.cloud.google.com/ → APIs & Services → Credentials
    # Requires Admin SDK API to be enabled on your Google Cloud project.
    # Files: src/services/google-workspace/auth.ts
    # Note: Safe to expose to client (used to initiate OAuth flow).
VITE_GW_OAUTH_REDIRECT_BASE_URL=
    # OAuth redirect base URL. Defaults to VITE_SUPABASE_URL if not set.
    # Must match what's registered in Google Cloud Console.
    # Full redirect URI: {this value}/functions/v1/google-workspace-oauth-callback
    # Files: src/services/google-workspace/auth.ts
    # Examples:
    #   - Production: https://supabase.equipqr.app
    #   - Preview: https://supabase.preview.equipqr.app
    #   - Local: http://localhost:54321

# ── Feature Flags
BILLING_DISABLED=true
    # When true, disables all billing features. Users have access to all features regardless of subscription.
    # Default: true (billing disabled). This flag allows staged removal of Stripe integration.

VITE_ENABLE_QUICKBOOKS=false
    # When 'true', enables QuickBooks Online integration (OAuth, customer mapping, invoice export).
    # Default: false. Only enable when INTUIT_CLIENT_ID and INTUIT_CLIENT_SECRET are configured.
    # Files: src/lib/flags.ts, src/components/organization/QuickBooksIntegration.tsx

VITE_ENABLE_QB_PDF_ATTACHMENT=false
    # When 'true', enables PDF attachment for QuickBooks invoice exports.
    # Default: false. Requires ENABLE_QB_PDF_ATTACHMENT in Supabase Edge Function secrets too.
    # Files: src/lib/flags.ts, supabase/functions/quickbooks-export-invoice/index.ts

# ── Server / Edge Functions — DO NOT EXPOSE TO CLIENT

# DEPRECATED: Stripe integration removed. Variables kept for rollback compatibility only.
STRIPE_SECRET_KEY=
    # DEPRECATED. Get from: https://dashboard.stripe.com/ → Developers → API Keys → Secret key
STRIPE_WEBHOOK_SECRET=
    # DEPRECATED. Get from: https://dashboard.stripe.com/ → Developers → Webhooks → Signing secret

SUPABASE_SERVICE_ROLE_KEY=
    # Supabase service role key (bypasses RLS). Get from: Supabase Dashboard → Settings → API → service_role secret
    # KEEP SECRET! Never expose to client. Used by Edge Functions for privileged operations.
SUPABASE_URL=
    # Same as VITE_SUPABASE_URL. Get from: Supabase Dashboard → Settings → API → Project URL
    # Used by Edge Functions to create Supabase client.
SUPABASE_ANON_KEY=
    # Same as VITE_SUPABASE_ANON_KEY. Get from: Supabase Dashboard → Settings → API → anon public
    # Used by some Edge Functions that need a non-privileged client.

RESEND_API_KEY=
    # Resend email API key. Get from: https://resend.com/ → API Keys → Create API Key
    # KEEP SECRET! Used for sending invitation emails.
    # File: supabase/functions/send-invitation-email/index.ts

HCAPTCHA_SECRET_KEY=
    # hCaptcha secret key. Get from: https://dashboard.hcaptcha.com/ → Settings → Secret Key
    # KEEP SECRET! Different from the public site key. Used for server-side verification.
    # File: supabase/functions/verify-hcaptcha/index.ts

PRODUCTION_URL=
    # Production app URL for building invite links. Set to https://equipqr.app for production.
    # For local dev, use http://localhost:8080.
    # File: supabase/functions/send-invitation-email/index.ts

TOKEN_ENCRYPTION_KEY=
    # Encryption key for OAuth refresh tokens at rest. Must be cryptographically secure.
    # Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
    # KEEP SECRET! Used by Google Workspace OAuth functions.
    # Files: supabase/functions/google-workspace-oauth-callback, supabase/functions/google-workspace-sync-users

KDF_SALT=
    # Optional. Deployment-specific salt for PBKDF2 key derivation. Provides defense-in-depth.
    # Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
    # IMPORTANT: Once set, do NOT change - existing encrypted data will become unreadable.
    # Files: supabase/functions/_shared/crypto.ts

# ── QuickBooks Online OAuth (Server) — DO NOT EXPOSE TO CLIENT
INTUIT_CLIENT_ID=
    # Same as VITE_INTUIT_CLIENT_ID. Get from: https://developer.intuit.com/ → My Apps → Keys & credentials
    # Files: supabase/functions/quickbooks-oauth-callback/index.ts
INTUIT_CLIENT_SECRET=
    # QuickBooks OAuth client secret. Get from: https://developer.intuit.com/ → My Apps → Keys & credentials
    # KEEP SECRET! Never expose to client.
    # Files: supabase/functions/quickbooks-oauth-callback/index.ts
QB_OAUTH_REDIRECT_BASE_URL=
    # OAuth redirect base URL. MUST match VITE_QB_OAUTH_REDIRECT_BASE_URL on client.
    # If using custom Supabase domain, set this to that domain.
    # Examples: https://supabase.equipqr.app (prod), https://supabase.preview.equipqr.app (preview)
    # Files: supabase/functions/quickbooks-oauth-callback/index.ts
QUICKBOOKS_SANDBOX=true
    # Set to "true" for sandbox/testing, "false" for production QuickBooks API.
    # Files: supabase/functions/quickbooks-export-invoice/index.ts
ENABLE_QB_PDF_ATTACHMENT=false
    # Server-side flag for PDF attachments. Must match VITE_ENABLE_QB_PDF_ATTACHMENT.
    # Files: supabase/functions/quickbooks-export-invoice/index.ts

# ── Google Workspace OAuth (Server) — DO NOT EXPOSE TO CLIENT
GOOGLE_WORKSPACE_CLIENT_ID=
    # Same as VITE_GOOGLE_WORKSPACE_CLIENT_ID.
    # Get from: https://console.cloud.google.com/ → APIs & Services → Credentials → OAuth 2.0 Client IDs
    # Files: supabase/functions/google-workspace-oauth-callback/index.ts
GOOGLE_WORKSPACE_CLIENT_SECRET=
    # Google OAuth client secret. Get from same location as client ID.
    # KEEP SECRET! Never expose to client.
    # Files: supabase/functions/google-workspace-oauth-callback/index.ts
GW_OAUTH_REDIRECT_BASE_URL=
    # OAuth redirect base URL. MUST match VITE_GW_OAUTH_REDIRECT_BASE_URL on client.
    # If using custom Supabase domain, set this to that domain.
    # Examples: https://supabase.equipqr.app (prod), https://supabase.preview.equipqr.app (preview)
    # Files: supabase/functions/google-workspace-oauth-callback/index.ts

# ── Google Maps (Optional - for Fleet Map feature)
GOOGLE_MAPS_API_KEY=
    # Server-side Google Maps API key. Get from: https://console.cloud.google.com/ → APIs & Services → Credentials
    # Enable: Maps JavaScript API, Geocoding API, Places API
    # Restrict by IP address for server-side use.
VITE_GOOGLE_MAPS_API_KEY=
    # Client-side Google Maps API key. Same source as above, but restrict by HTTP referrers.
    # Used for rendering maps in the browser.

# ── Legacy / Documentation Only
VITE_STRIPE_PUBLISHABLE_KEY=
    # DEPRECATED. Stripe publishable key. Get from: https://dashboard.stripe.com/ → Developers → API Keys
