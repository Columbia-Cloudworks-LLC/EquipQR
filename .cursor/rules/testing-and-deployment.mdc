---
description: Testing strategies and CI requirements.
globs: src/**/*.{ts,tsx,test.ts,spec.ts}
alwaysApply: true
---
# Testing & QA

## Frameworks

- **Unit**: Vitest. Run `npm test`.
- **Integration**: Test full workflows (e.g., "Create Work Order") using `@testing-library/react`.

## Standards

- **Coverage**: Aim for >80%. Run `npm run test:coverage`.
- **Mocks**: Mock Supabase calls using `msw` or internal mock utilities. Do not hit the live DB in tests.
- **Hooks**: Test custom hooks in isolation using `@testing-library/react-hooks`.

## Pre-Commit

Before declaring a task complete:

1. Run `npm run lint`.
2. Run `npm run type-check`.
3. Ensure no new console warnings are introduced.
