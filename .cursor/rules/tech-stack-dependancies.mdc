---
alwaysApply: true
---
- Use React 18+ with TypeScript 5.5+. Prefer functional components and hooks over class components.
- State management: TanStack Query (v5+) for server state (queries/mutations with `staleTime: 5 * 60 * 1000` for common data). React Context for global state (e.g., AuthContext, OrganizationContext). useState/useReducer for local state.
- Routing: React Router v6 with nested routes, lazy loading (`React.lazy` + `Suspense`), and protected routes via AuthContext.
- Forms: React Hook Form v7 + Zod for validation. Use `zodResolver` and define schemas in co-located files (e.g., `equipmentSchema.ts`).
- Styling: Tailwind CSS v3.4 with shadcn/ui components (Radix UI primitives). Use utility classes; avoid custom CSS unless extending theme in `tailwind.config.ts`. Support dark mode via `next-themes`.
- Backend: Supabase for auth (JWT), database (PostgreSQL with RLS), realtime (subscriptions), and storage. Use `@supabase/supabase-js` v2+. All queries must include `organization_id` filter for multi-tenancy.
- Icons: Lucide React. Wrap in `LucideIcon` component with sizes (`xs` to `2xl`).
- Utilities: date-fns for dates, clsx/tailwind-merge for conditional classes, nanoid for IDs, Sonner for toasts (via `useAppToast` hook).
- Build: Vite v5.4 with SWC plugin. Use `@/*` alias for `src/*` imports.
- Avoid: Redux (use Query/Context), jQuery, inline styles (use Tailwind vars like `--primary`).
